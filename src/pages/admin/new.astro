---
// src/pages/admin/new.astro
import AdminLayout from "../../components/admin/AdminLayout.astro";
import { getSession } from "../../utils/auth";
import PostEditor from "../../components/admin/PostEditor.astro";

// Auth check
const session = await getSession(Astro);
const accessToken = Astro.cookies.get("sb-access-token");
const refreshToken = Astro.cookies.get("sb-refresh-token");

if (!accessToken || !refreshToken || !session) {
  return Astro.redirect("/admin/signin");
}

---

<AdminLayout title={`Create New Post`} session={session}>
  <div class="mb-8">
    <h1 class="mb-2 text-2xl font-bold">Create New Post</h1>
    <p class="text-gray-600">"Creativity is seeing what everyone else has seen, and thinking what no one else has thought." â€“ Albert Einstein</p>
  </div>

  <PostEditor />
</AdminLayout>