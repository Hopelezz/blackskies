---
// components/ThemeProvider.astro
---

<script is:inline>
    function getThemePreference() {
      if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
        return localStorage.getItem('theme');
      }
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    
    function setTheme(theme) {
      document.documentElement.dataset.theme = theme;
      localStorage.setItem('theme', theme);
    }
  
    setTheme(getThemePreference());
  
    window.addEventListener('load', () => {
      // Set data-admin-route attribute for admin pages
      if (window.location.pathname.startsWith('/admin')) {
        document.body.setAttribute('data-admin-route', '');
      }
    });
  </script>